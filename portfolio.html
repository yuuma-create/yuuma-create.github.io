<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>かわいいChrome風タブUIサンプル</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Rounded Mplus 1c', 'Hiragino Maru Gothic Pro', 'Arial Rounded MT Bold', Arial, sans-serif;
      background: #ffe4ec;
      margin: 0;
      padding: 0; /* 余白を消す */
      display: block; /* 中央寄せ解除 */
      min-height: 100vh;
    }
    .main-container {
      width: 100%;
      max-width: 700px;
      background: #fff;
      min-height: 100vh;
      box-shadow: 0 0 24px #ffd6e6;
      border-radius: 0 0 24px 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0 auto; /* 中央寄せはmain-containerだけ */
    }
    .tabs {
      display: flex;
      border-bottom: 3px solid #ffb6d5;
      justify-content: center;
      margin-bottom: 0;
      width: 100vw; /* 画面全体に広げる */
      max-width: 100vw;
      left: 0;
      position: relative;
      flex-wrap: nowrap;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      background: #fff0f8;
      box-sizing: border-box;
    }
    .tabs::-webkit-scrollbar {
      display: none;
    }
    .tab {
      padding: 12px 20px 12px 16px; /* paddingを少し減らす */
      cursor: pointer;
      border: 2px solid #ffb6d5;
      border-bottom: none;
      background: #fff0f8;
      margin: 0 6px;
      border-radius: 20px 20px 0 0;
      font-size: 1.1em;
      color: #d16ba5;
      box-shadow: 0 2px 8px #ffd6e6;
      position: relative;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      display: flex;
      align-items: center;
      gap: 2px; /* gapを減らす */
      flex-shrink: 1;
      min-width: 80px; /* ← 100pxから80pxに変更 */
      max-width: 220px;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: visible; /* 省略しない */
    }
    .tab.active {
      background: #fff;
      color: #ff5eae;
      font-weight: bold;
      box-shadow: 0 4px 16px #ffd6e6;
      z-index: 2;
    }
    .tab:not(.active):hover {
      background: #ffe4ec;
      color: #ff5eae;
    }
    .tab .emoji {
      font-size: 1.3em;
      margin-right: 6px;
      vertical-align: -2px;
    }
    .close-btn {
      font-size: 1em;
      color: #ff5eae;
      background: none;
      border: none;
      margin-left: 6px;
      cursor: pointer;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      line-height: 20px;
      text-align: center;
      transition: background 0.2s;
      position: relative;
      z-index: 3;
      flex-shrink: 0; /* ← 追加: バツが縮まないように */
    }
    .close-btn:hover {
      background: #ffd6e6;
      color: #d16ba5;
    }
    .tab-content {
      border: 2px solid #ffb6d5;
      border-radius: 0 0 20px 20px;
      padding: 32px 24px;
      background: #fff;
      margin: 0 auto;
      margin-top: -2px;
      max-width: 700px; /* ここも広げる */
      min-height: 120px;
      box-shadow: 0 4px 24px #ffd6e6;
      font-size: 1.1em;
      color: #d16ba5;
      text-align: center;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .cute-window {
      width: 100%;
      max-width: 500px; /* ここも広げる */
      margin: 24px auto 12px auto;
      background: #fff0f8;
      border: 2px solid #ffb6d5;
      border-radius: 18px;
      box-shadow: 0 6px 24px #ffd6e6;
      overflow: hidden;
      position: relative;
      animation: popin 0.4s;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    @keyframes popin {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    .cute-window-header {
      background: linear-gradient(90deg, #ffb6d5 60%, #ffe4ec 100%);
      padding: 10px 16px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-sizing: border-box;
    }
    .cute-window-title {
      font-weight: bold;
      color: #d16ba5;
      font-size: 1.1em;
      letter-spacing: 1px;
    }
    .cute-window-close {
      background: #fff;
      border: none;
      color: #ff5eae;
      font-size: 1.1em;
      border-radius: 50%;
      width: 26px;
      height: 26px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .cute-window-close:hover {
      background: #ffd6e6;
      color: #d16ba5;
    }
    .cute-window-body {
      padding: 20px 18px 18px 18px;
      color: #d16ba5;
      font-size: 1em;
      text-align: center;
      background: #fff;
      width: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .cute-window-img {
      width: 100%;
      max-width: 400px;
      border-radius: 16px;
      box-shadow: 0 2px 12px #ffd6e6;
      display: block;
      margin: 0 auto 8px auto;
    }

    @media (max-width: 600px) {
      body {
        padding: 4vw 0;
        display: block;
      }
      .main-container,
      .tabs,
      .tab-content,
      .cute-window {
        max-width: 98vw;
      }
      .tab {
        min-width: 70px;
        padding: 10px 8px;
        font-size: 1em;
      }
      .cute-window-img {
        max-width: 90vw;
      }
    }
    @media (max-width: 430px) {
      .tab {
        padding: 10px 8px 10px 8px;
        font-size: 0.95em;
        min-width: 60px; /* さらに小さい画面で対応 */
        max-width: 120px;
        gap: 1px;
      }
      .close-btn {
        width: 20px;
        height: 20px;
        font-size: 0.95em;
        margin-left: 2px;
        flex-shrink: 0; /* バツが潰れないように */
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="tabs" id="tabs">
      <div class="tab active" data-tab="tab1"><span class="emoji">🍓</span>タブ1<button class="close-btn" title="閉じる">✖</button></div>
      <div class="tab" data-tab="tab2"><span class="emoji">🍰</span>タブ2<button class="close-btn" title="閉じる">✖</button></div>
      <div class="tab" data-tab="tab3"><span class="emoji">🧸</span>タブ3<button class="close-btn" title="閉じる">✖</button></div>
    </div>
    <div class="tab-content" id="tab1">
      <div class="cute-window">
        <div class="cute-window-header">
          <span class="cute-window-title">🍓 いちごウィンドウ</span>
          <button class="cute-window-close" onclick="document.querySelector('.cute-window').style.display='none'">✖</button>
        </div>
        <div class="cute-window-body">
          <img src="image/angel.png" alt="かわいいイラスト" class="cute-window-img">
          <div style="margin-top: 12px;">
            こんにちは！これはかわいいウィンドウです。<br>
            いちごの世界へようこそ🍓
          </div>
        </div>
      </div>
      🍓 いちごが大好きなタブ1の内容です。
    </div>
    <div class="tab-content" id="tab2" style="display:none;">🍰 スイーツいっぱいのタブ2の内容です。</div>
    <div class="tab-content" id="tab3" style="display:none;">🧸 ふわふわくまさんのタブ3の内容です。</div>
  </div>
  <script>
    const tabsContainer = document.getElementById('tabs');
    const contents = document.querySelectorAll('.tab-content');

    function activateTab(tab) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      if (tab) tab.classList.add('active');
      contents.forEach(c => c.style.display = 'none');
      if (tab) {
        const content = document.getElementById(tab.dataset.tab);
        if (content) content.style.display = 'block';
      }
    }

    tabsContainer.addEventListener('click', function(e) {
      const tab = e.target.closest('.tab');
      const closeBtn = e.target.closest('.close-btn');
      if (closeBtn && tab) {
        // タブと内容を削除
        const tabId = tab.dataset.tab;
        const content = document.getElementById(tabId);
        tab.remove();
        if (content) content.remove();

        // 残っているタブをアクティブに
        const remainingTabs = document.querySelectorAll('.tab');
        if (tab.classList.contains('active') && remainingTabs.length > 0) {
          activateTab(remainingTabs[0]);
        } else if (remainingTabs.length === 0) {
          contents.forEach(c => c.style.display = 'none');
        }
        return;
      }
      // 通常のタブ切り替え
      if (tab && !closeBtn) {
        activateTab(tab);
      }
    });
  </script>
</body>
</html>
